# Сервис Анти-Плагиат
## Технологии
* **.NET 8 / ASP.NET Core**
* **C#**
* **Entity Framework Core**
* **OpenAPI / Swagger**
* **Docker / Docker Compose**
* **PostgreSQL / SQLite (по выбору)**

## Архитектура системы
Чистая архитектура.
Система состоит из трех микросервисов:


### FileStorageService

**Назначение:**
Обрабатывает загрузку текстовых файлов, сохраняет их в файловую систему или базу данных, и предоставляет доступ к сохранённым файлам.

**Основные функции:**

* Загрузка `.txt` файлов через API
* Хранение метаданных и содержимого файлов
* Выдача файлов по ID

---

### FileAnalysisService

**Назначение:**
Анализирует файлы на наличие 100% плагиата и сохраняет результаты анализа.

**Основные функции:**

* Генерация хэшей содержимого файлов
* Поиск файлов плагиатов (проверка по хэшам)
* Подсчёт статистики текста (слова, символы)

---

###  APIGateway

**Назначение:**
Предоставляет единый API-интерфейс для внешнего мира, маршрутизирует запросы к соответствующим микросервисам (storage/analysis).

**Основные функции:**

* Reverse proxy для внутренних сервисов
* Документация API через Swagger
* Простейшая обработка ошибок и логгирование

---

---

## Пользовательские сценарии

### Загрузка файла

**Сценарий:**
Пользователь выбирает файл и отправляет его через API.
**Результат:**
Файл сохраняется в хранилище, возвращается `fileId` для дальнейших операций.

---

### Получение файла

**Сценарий:**
Пользователь запрашивает ранее загруженный файл по `fileId`.
**Результат:**
Сервис возвращает исходный файл.

---

### Получение анализа

**Сценарий:**
Пользователь отправляет запрос на анализ файла по `fileId`.
**Результат:**
Если файл уже анализировался — возвращается сохранённый результат.
Если нет — файл загружается, анализируется, результат сохраняется и возвращается пользователю (включая статистику).

---

## API Endpoints

### **API Gateway**
порт 5002

* `POST /api/APIGateway/upload`
  Загружает файл в FileStoringService.

* `POST /api/APIGateway/analyze/{fileId}`
  Анализирует файл через FileAnalysisService.

* `GET /api/APIGateway/file/{fileId}`
  Получает файл из FileStoringService.



---

### **FileStoringService**
порт 5000
* `POST /api/Files/upload`
  Загружает файл и сохраняет его в хранилище.

* `GET /api/Files/download?id={fileId}`
  Скачивает файл по идентификатору.

---

### **FileAnalysisService**
порт 5001
* `POST /api/Analysis/{id}`
  Анализирует файл с указанным `id`.

---

## Запуск проекта

   `docker-compose up build`

   `docker-compose up`

3. Сервисы будут доступны по следующим адресам:
   - API Gateway: http://localhost:5002
   - File Storing Service: http://localhost:5000
   - File Analysis Service: http://localhost:5001
